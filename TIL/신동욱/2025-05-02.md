# Hailoì—ì„œ ì¸ê³µì§€ëŠ¥ ëª¨ë¸ ì‹¤í–‰í•˜ê¸°: ë¬¸ì œ í•´ê²° ê¸°ë¡

## ğŸ“Œ 1. ë¬¸ì œ ìƒí™©
- í†µí•© íŒŒì´í”„ë¼ì¸ Python ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•˜ë©´ OpenCV ê´€ë ¨ ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ì¶œë ¥í•˜ë©° ì¢…ë£Œë¨.
- ì›ì¸ íŒŒì•…ì— ì‹œê°„ì´ ë§ì´ ì†Œìš”ë¨ (ì•½ 2ì¼).

## âœ… 2. í•´ê²° ë°©ë²•
- ì›ì¸: `cv2.VideoCapture()` ì‚¬ìš© ì‹œ Raspberry Piì—ì„œ ì¹´ë©”ë¼ ì¸ì‹ ì‹¤íŒ¨.
- í•´ê²°: [`Picamera2`](https://github.com/raspberrypi/picamera2) ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ ë³€ê²½í•˜ë‹ˆ ì •ìƒ ì‘ë™.
  ```python
  from picamera2 import Picamera2
  cam = Picamera2()
  cam.configure(cam.create_video_configuration(main={"format": "RGB888", "size": (1280, 720)}))
  cam.start()
  ```

---

## âš ï¸ 3. ìƒˆë¡œìš´ ë¬¸ì œ: ëª¨ë¸ ìœ ì‚¬ë„ ì´ìƒ í˜„ìƒ

- ì‚¬ìš© ì¤‘ì¸ ëª¨ë¸: `arcface_mobilefacenet.hef` (Hailo ì œê³µ)
- ë¬¸ì œì : ì„œë¡œ ë‹¤ë¥¸ ì–¼êµ´ì„ì—ë„ ì½”ì‚¬ì¸ ìœ ì‚¬ë„ê°€ 0.99ë¡œ ë§¤ìš° ë†’ê²Œ ë‚˜ì˜´
- `embedding vector` ê°„ **raw difference**ëŠ” í°ë° ë°©í–¥ì´ ìœ ì‚¬í•¨ â†’ ë°©í–¥ ê¸°ë°˜ ìœ ì‚¬ë„(Cosine)ê°€ ë„ˆë¬´ ë¯¼ê°í•˜ê²Œ ë°˜ì‘í•¨

### ëª¨ë¸ ì…ë ¥ í™•ì¸
- ëª¨ë¸ ì…ë ¥ì€ `uint8` íƒ€ì…ìœ¼ë¡œë§Œ ë§ì¶°ì£¼ë©´ ë˜ê³ , ë‚´ë¶€ì ìœ¼ë¡œ ì •ê·œí™”(Normalization) ìˆ˜í–‰í•¨
- ë”°ë¼ì„œ ì „ì²˜ë¦¬ ë¬¸ì œëŠ” ì•„ë‹˜

---

## ğŸ”„ 4. í•´ê²° ë°©í–¥: ê¸°ì¡´ ì˜ ë™ì‘í•˜ë˜ ëª¨ë¸ì„ Hailoìš©ìœ¼ë¡œ ë³€í™˜

### ì„ íƒí•œ ë°©ë²•: **InsightFaceì˜ MobileFaceNet â†’ ONNX â†’ HEF**

1. **ê¸°ì¡´ ì‚¬ìš© ì¤‘ì´ë˜ Paddle ëª¨ë¸ â†’ ONNX ë³€í™˜**
   - Paddle ëª¨ë¸ì„ ONNXë¡œ ë³€í™˜í•˜ì—¬ Hailo Dataflow Compilerë¡œ HEF ìƒì„± ì˜ˆì •

2. **í™˜ê²½ êµ¬ì„± ë° ë³€í™˜ ëª…ë ¹ì–´**
   ```bash
   # PaddlePaddle ì„¤ì¹˜ (CPU ë²„ì „)
   pip install paddlepaddle==2.4.2 -f https://www.paddlepaddle.org.cn/whl/paddle_cpu.html

   # paddle2onnx ì„¤ì¹˜
   pip install paddle2onnx==1.0.6

   # ONNX ë³€í™˜ ì‹¤í–‰
   paddle2onnx \
     --model_dir ./model \
     --model_filename inference.pdmodel \
     --params_filename inference.pdiparams \
     --save_file mobilefacenet.onnx \
     --opset_version 11 \
     --enable_onnx_checker True
   ```

3. **ê²°ê³¼**
   - ONNX íŒŒì¼ ìƒì„± ì™„ë£Œ
   - ëª¨ë¸ ì†ìƒ ì—¬ë¶€ëŠ” ì•„ì§ ë¯¸í™•ì¸, í–¥í›„ `onnxruntime` ë˜ëŠ” `Netron` ë“±ì„ í†µí•´ ê²€ì¦ í•„ìš”

## onnx -> hefí•˜ê¸°
### How?
- Hailo Dataflow Compilerë¥¼ ë‹¤ìš´ë°›ëŠ”ë‹¤
- https://hailo.ai/developer-zone/documentation/dataflow-compiler-v3-31-0/?sp_referrer=install/install.html ì´ ë§í¬ë¥¼ ë”°ë¼ê°„ë‹¤
- DataFlow Compiler ì˜ˆì œ
https://hailo.ai/developer-zone/documentation/dataflow-compiler-v3-30-0/?sp_referrer=tutorials_notebooks/notebooks/DFC_2_Model_Optimization_Tutorial.html#Model-Optimization-Tutorial